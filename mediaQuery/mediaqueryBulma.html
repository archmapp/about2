<!-- https://developer.mozilla.org/ja/docs/Web/API/MediaQueryList -->

<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>MediaQueryList example</title>
		<style>
			html {
				font-family: sans-serif;
				background-color: white;
			}

			body {
				padding: 20px;
				margin: 10px;
				border: 10px solid black;
			}

			h1,
			p,
			div {
				text-align: center;
			}

			.trans {
				transform: rotateY(180deg);
			}
		</style>

		<script src="./shortBulma$$.js"></script>
	</head>

	<body>
		<h1>matchMedia Bulma</h1>

		<p></p>

		<div class="trgt">ABC</div>
	</body>

	<script>
		let para = $$q('p')

		// (max-width: 768px)  (max-width: 1024px)
		// MediaQueryList, MediaQueryListEvent
		function screenCheck(m) {
			// console.log(m) // 87
			// const mm = m.media.match(/[0-9]+/g)
			// x1 = +mm[0]
			const iw = window.innerWidth
			// document.documentElement.clientWidth

			// blue: default
			if (m.matches) {
				// max型のときは、こちらはｎ個

				para.textContent = `(max-width: ${iw}px)`
				// max-widthのときは、↓この順序
				if (iw <= 500) {
					// console.log(window.innerWidth)
					document.body.style.backgroundColor = 'red'
					document.body.style.fontSize = '0.3rem'
					return
				}
				if (iw <= 768) {
					document.body.style.backgroundColor = 'green'
					document.body.style.fontSize = '0.6rem'
					$$qcL('.trgt', 'trans', 'remove')
					return
				}
				if (iw <= 900) {
					document.body.style.backgroundColor = 'yellow'
					document.body.style.fontSize = '1rem'
					console.log($$q('.trgt'))
					// alert($$q('.toggle').textContent)
					$$qcL('.trgt', 'trans', 'add')
					return
				}
				if (iw < 1024) {
					document.body.style.backgroundColor = 'blue'
					document.body.style.fontSize = '2rem'
					$$qcL('.trgt', 'trans', 'remove')
					return
				}
				console.log('screenCheck between')
			} else {
				// max型のときは、こちらはｎ+1個
				para.textContent = `(${iw}px < innerWidth)`
				if (1024 < iw) {
					document.body.style.backgroundColor = 'pink'
					document.body.style.fontSize = '2rem'
					return
				}
				if (900 <= iw) {
					document.body.style.backgroundColor = 'blue'
					document.body.style.fontSize = '2rem'
					$$qcL('.trgt', 'trans', 'remove')
					return
				}
				if (768 <= iw) {
					document.body.style.backgroundColor = 'yellow'
					document.body.style.fontSize = '1rem'
					$$qcL('.trgt', 'trans', 'add')
					return
				}
				if (500 <= iw) {
					document.body.style.backgroundColor = 'green'
					document.body.style.fontSize = '0.6rem'
					$$qcL('.trgt', 'trans', 'remove')
					return
				}

				document.body.style.backgroundColor = 'red'
				document.body.style.fontSize = '0.3rem'
			}
		}

		// max型でn=４個
		$$set_mql(screenCheck, 500, 768, 900, 1024)
	</script>
</html>
